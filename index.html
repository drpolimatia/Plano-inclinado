<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Plano Inclinado | Dark Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%);
            min-height: 100vh;
            color: #f8f9fa;
            overflow: hidden;
        }

        .container {
            display: grid;
            grid-template-columns: 280px 1fr;
            grid-template-rows: auto 1fr;
            height: 100vh;
            gap: 12px;
            padding: 12px;
        }

        /* Header */
        .header {
            grid-column: 1 / -1;
            background: rgba(20, 20, 35, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .header-center {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .polimatia-logo {
            flex-shrink: 0;
        }

        .equation-box {
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 1.2rem;
        }

        .status-badge {
            padding: 6px 14px;
            border-radius: 16px;
            font-weight: bold;
            font-size: 0.85rem;
        }

        .status-moving {
            background: linear-gradient(45deg, #00ff88, #00cc66);
            color: #000;
        }

        .status-static {
            background: linear-gradient(45deg, #ff6b6b, #ee5a5a);
            color: #fff;
        }

        /* Painel Esquerdo - Controles + Energia */
        .left-panel {
            display: flex;
            flex-direction: column;
            gap: 12px;
            overflow-y: auto;
        }

        .panel-section {
            background: rgba(20, 20, 35, 0.85);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 14px;
        }

        .panel-title {
            font-size: 0.9rem;
            font-weight: 600;
            text-align: center;
            padding-bottom: 10px;
            margin-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 12px;
        }

        .control-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
        }

        .control-value {
            font-weight: bold;
            padding: 2px 7px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .value-angle {
            background: rgba(248, 249, 250, 0.2);
            color: #f8f9fa;
        }

        .value-mass {
            background: rgba(255, 255, 0, 0.2);
            color: #ffff00;
        }

        .value-friction {
            background: rgba(255, 0, 255, 0.2);
            color: #ff00ff;
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 5px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            cursor: pointer;
        }

        #angleSlider::-webkit-slider-thumb {
            background: #f8f9fa;
            box-shadow: 0 0 6px #f8f9fa;
        }

        #massSlider::-webkit-slider-thumb {
            background: #ffff00;
            box-shadow: 0 0 6px #ffff00;
        }

        #frictionSlider::-webkit-slider-thumb {
            background: #ff00ff;
            box-shadow: 0 0 6px #ff00ff;
        }

        #frictionKineticSlider::-webkit-slider-thumb {
            background: #ff66ff;
            box-shadow: 0 0 6px #ff66ff;
        }

        .force-display {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 8px;
            margin-top: 8px;
        }

        .force-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 3px 0;
            font-size: 0.72rem;
        }

        .force-name {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .force-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
        }

        .dot-weight {
            background: #ffff00;
        }

        .dot-normal {
            background: #00ffff;
        }

        .dot-friction {
            background: #ff00ff;
        }

        .dot-px {
            background: rgba(255, 255, 0, 0.6);
        }

        .dot-py {
            background: rgba(255, 255, 0, 0.6);
        }

        .play-controls {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .btn {
            flex: 1;
            padding: 9px 10px;
            border: none;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00ff88, #00cc66);
            color: #000;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Energia */
        .energy-bars {
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: 160px;
            padding: 10px 5px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        .energy-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            flex: 1;
        }

        .energy-value {
            font-size: 0.75rem;
            font-weight: bold;
            color: #fff;
        }

        .energy-bar-wrapper {
            width: 40px;
            height: 110px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: flex-end;
        }

        .energy-bar {
            width: 100%;
            border-radius: 5px 5px 0 0;
            transition: height 0.1s ease-out;
        }

        .bar-ep {
            background: linear-gradient(180deg, #ffaa00, #ff8800);
            box-shadow: 0 0 10px rgba(255, 136, 0, 0.5);
        }

        .bar-ec {
            background: linear-gradient(180deg, #00ff88, #00cc66);
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .bar-heat {
            background: linear-gradient(180deg, #ff44ff, #ff00ff);
            box-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
        }

        .energy-label {
            font-size: 0.7rem;
            color: #888;
            text-align: center;
        }

        .energy-total {
            margin-top: 10px;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            text-align: center;
            font-size: 0.8rem;
        }

        .energy-total span {
            color: #00ff88;
            font-weight: bold;
        }

        /* Canvas - ocupa todo o espa√ßo */
        .canvas-container {
            background: rgba(10, 10, 15, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        #mainCanvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .canvas-overlay {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .overlay-btn {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .overlay-btn.active {
            background: rgba(0, 255, 136, 0.3);
            border-color: #00ff88;
        }

        /* Responsive - Tablet */
        @media (max-width: 900px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr;
                height: 100vh;
                gap: 8px;
                padding: 8px;
            }

            .left-panel {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 8px;
            }

            .panel-section {
                flex: 1;
                min-width: 200px;
            }
        }

        /* Responsive - Mobile */
        @media (max-width: 600px) {
            body {
                overflow-y: auto;
                overflow-x: hidden;
            }

            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 45vh;
                height: auto;
                min-height: 100vh;
                gap: 6px;
                padding: 6px;
            }

            .header {
                padding: 6px 10px;
                gap: 6px;
            }

            .equation-box {
                font-size: 0.75rem;
                padding: 5px 8px;
            }

            .status-badge {
                font-size: 0.7rem;
                padding: 4px 8px;
            }

            /* Controles e Energia lado a lado */
            .left-panel {
                flex-direction: row;
                gap: 6px;
            }

            .panel-section {
                flex: 1;
                padding: 8px;
                min-width: 0;
            }

            .panel-title {
                font-size: 0.7rem;
                padding-bottom: 6px;
                margin-bottom: 6px;
            }

            .control-group {
                margin-bottom: 6px;
            }

            .control-label {
                font-size: 0.65rem;
            }

            .control-value {
                font-size: 0.6rem;
                padding: 1px 4px;
            }

            /* Sliders otimizados para toque */
            input[type="range"] {
                height: 6px;
            }

            input[type="range"]::-webkit-slider-thumb {
                width: 18px;
                height: 18px;
            }

            .force-display {
                padding: 4px;
                margin-top: 4px;
            }

            .force-item {
                font-size: 0.55rem;
                padding: 1px 0;
            }

            /* Ocultar display de mu no mobile para economizar espa√ßo */
            .force-item[style*="font-size: 0.65rem"] {
                display: none;
            }

            /* Energia compacta no mobile */
            .energy-bars {
                height: 80px;
                padding: 5px 3px;
            }

            .energy-bar-wrapper {
                width: 24px;
                height: 55px;
            }

            .energy-value {
                font-size: 0.55rem;
            }

            .energy-label {
                font-size: 0.5rem;
            }

            .energy-total {
                padding: 4px;
                font-size: 0.6rem;
                margin-top: 4px;
            }

            /* Bot√µes compactos */
            .btn {
                padding: 8px 6px;
                font-size: 0.65rem;
            }

            .play-controls {
                gap: 6px;
                margin-top: 6px;
            }

            /* Canvas container */
            .canvas-container {
                min-height: 250px;
                border-radius: 8px;
            }

            .canvas-overlay {
                top: 6px;
                right: 6px;
                gap: 4px;
            }

            .overlay-btn {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }
        }

        /* Mobile landscape */
        @media (max-width: 900px) and (orientation: landscape) {
            .container {
                grid-template-columns: 280px 1fr;
                grid-template-rows: auto 1fr;
                height: 100vh;
            }

            .left-panel {
                flex-direction: column;
                overflow-y: auto;
                max-height: calc(100vh - 80px);
            }

            .panel-section {
                min-width: unset;
            }

            .energy-bars {
                height: 80px;
            }

            .energy-bar-wrapper {
                height: 50px;
            }
        }

        /* Very small screens */
        @media (max-width: 380px) {
            .container {
                padding: 5px;
                gap: 5px;
            }

            .header {
                padding: 6px 8px;
            }

            .equation-box {
                font-size: 0.8rem;
            }

            .panel-section {
                padding: 8px;
            }

            .control-label span:first-child {
                font-size: 0.7rem;
            }

            .force-item {
                font-size: 0.6rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <!-- Polimatia Logo -->
            <svg class="polimatia-logo" version="1.0" xmlns="http://www.w3.org/2000/svg" width="120" height="49"
                viewBox="0 0 556 227" preserveAspectRatio="xMidYMid meet" style="fill: #f8f9fa; opacity: 0.9;">
                <g transform="translate(0.000000,227.000000) scale(0.100000,-0.100000)" fill="currentColor"
                    stroke="none">
                    <path d="M446 2254 c-21 -20 -21 -70 0 -82 11 -6 14 -20 12 -51 l-3 -43 -47
41 c-25 23 -51 41 -57 41 -24 0 -8 -29 49 -85 57 -56 60 -62 60 -107 0 -50 -9
-59 -30 -33 -7 9 -35 34 -62 57 -66 55 -77 44 -55 -57 10 -42 17 -80 17 -85 0
-5 -20 2 -44 16 -38 21 -45 31 -55 72 -28 112 -32 122 -48 122 -13 0 -15 -8
-10 -45 4 -25 10 -57 13 -71 l7 -26 -42 23 c-22 13 -41 29 -41 36 0 40 -81 59
-100 24 -24 -47 2 -83 59 -80 30 2 91 -23 91 -37 0 -2 -25 -11 -55 -19 -58
-17 -74 -30 -57 -47 6 -6 33 -3 79 11 88 26 99 26 148 -3 l39 -24 -74 -22
c-76 -22 -107 -41 -97 -57 3 -5 40 -20 81 -33 42 -13 76 -26 76 -30 0 -3 -17
-16 -38 -27 l-37 -22 -70 20 c-83 23 -115 24 -115 5 0 -10 22 -21 60 -32 33
-9 60 -20 60 -23 0 -14 -67 -40 -99 -39 -36 1 -61 -21 -61 -53 0 -25 27 -49
54 -49 23 0 56 28 56 47 0 13 69 58 76 50 3 -3 -1 -30 -9 -61 -13 -47 -13 -57
-1 -67 11 -9 17 -5 28 22 8 19 19 59 26 89 11 50 17 58 53 78 22 12 42 20 45
18 2 -3 -3 -36 -12 -75 -9 -38 -16 -77 -16 -85 0 -29 32 -16 93 39 l62 55 3
-47 c3 -45 1 -48 -57 -107 -34 -34 -61 -67 -61 -73 0 -30 26 -21 71 23 l49 48
0 -62 c0 -49 -4 -66 -20 -82 -27 -27 -25 -62 5 -90 l25 -23 0 -215 0 -214 -25
-20 c-34 -27 -33 -70 1 -97 l27 -21 -5 -220 c-4 -209 -5 -221 -26 -243 -27
-28 -28 -68 -4 -90 26 -24 59 -21 86 8 23 25 25 25 191 25 166 0 168 0 191
-25 13 -14 34 -25 47 -25 51 0 76 70 37 105 -19 17 -20 31 -20 187 l0 170 27
29 28 29 232 0 c127 0 266 5 308 11 64 9 80 8 93 -4 33 -29 60 -30 87 -3 14
14 25 34 25 44 0 24 10 32 142 121 90 61 110 71 127 62 50 -27 96 30 71 88
-10 25 -6 47 36 181 43 137 51 154 75 162 56 19 58 96 2 116 -27 9 -33 21 -78
166 -41 131 -47 161 -37 176 33 53 -6 106 -70 96 -29 -5 -50 5 -177 87 -122
79 -146 99 -155 128 -16 48 -55 61 -97 30 -30 -23 -35 -23 -183 -16 -141 7
-152 9 -173 31 -27 29 -64 31 -88 4 -16 -17 -31 -20 -109 -20 -80 0 -93 2
-104 20 -16 25 -63 26 -85 2 -10 -10 -17 -23 -17 -28 0 -5 -18 -19 -40 -32
-45 -26 -45 -26 -25 47 15 57 13 71 -10 71 -12 0 -35 -55 -35 -85 0 -5 -5 -27
-10 -47 -8 -28 -21 -42 -55 -62 -25 -13 -45 -22 -45 -18 0 4 8 42 17 85 22
103 12 115 -55 59 -27 -23 -55 -48 -62 -57 -21 -26 -30 -17 -30 33 0 45 3 51
60 107 33 33 60 65 60 72 0 24 -26 13 -65 -27 -21 -22 -43 -40 -47 -40 -15 0
-8 77 7 90 22 18 19 77 -4 90 -27 14 -47 13 -65 -6z m706 -318 c11 -16 6 -27
-93 -183 -76 -119 -94 -142 -117 -145 -20 -2 -32 -13 -45 -40 l-19 -38 -39 23
c-21 12 -39 25 -39 28 0 3 27 13 60 22 54 15 72 32 54 49 -3 4 -44 -4 -91 -17
l-86 -24 -38 22 c-22 12 -39 24 -39 27 0 3 35 17 77 31 109 35 108 51 -2 85
l-87 27 47 27 47 27 80 -24 c54 -17 83 -22 90 -15 17 17 1 30 -57 47 -30 8
-55 17 -55 19 0 3 15 13 33 24 22 13 43 18 69 15 29 -4 38 -1 47 15 9 18 18
19 103 14 51 -2 96 -10 100 -16z m-559 -58 c-15 -60 -20 -68 -55 -88 l-38 -21
0 43 c0 39 4 47 52 90 29 25 54 46 55 45 1 -1 -6 -32 -14 -69z m982 53 c18 -1
-96 -60 -219 -113 -45 -20 -50 -20 -75 -5 -34 21 -49 76 -27 109 15 23 16 23
158 17 79 -4 152 -7 163 -8z m-1115 -118 l0 -44 -39 21 c-32 19 -40 30 -50 72
-18 81 -16 84 39 38 46 -39 50 -45 50 -87z m760 46 c9 -34 9 -44 -4 -58 -9
-10 -16 -28 -16 -42 -1 -19 -20 -37 -92 -86 -50 -35 -94 -61 -96 -58 -8 8 170
285 184 285 7 0 18 -18 24 -41z m390 36 c0 -3 -32 -68 -70 -145 -65 -131 -72
-140 -99 -140 -22 0 -39 13 -78 58 -72 83 -68 90 92 168 122 59 155 71 155 59z
m312 -141 c43 -27 76 -53 75 -59 -2 -5 -32 -15 -68 -21 -57 -9 -67 -8 -88 8
-13 10 -31 18 -40 18 -11 0 -33 33 -64 95 -26 52 -47 97 -47 100 0 5 35 -17
232 -141z m-258 -7 c10 -66 16 -120 14 -121 -17 -13 -165 -43 -173 -35 -6 6
16 60 60 149 38 77 72 136 76 132 3 -4 14 -60 23 -125z m83 -80 c-29 -53 -42
-44 -50 32 -4 33 -9 79 -12 103 -5 42 -4 41 34 -35 34 -68 38 -82 28 -100z
m-1323 62 c-3 -5 -18 -16 -33 -23 -24 -13 -34 -13 -82 1 -30 8 -58 19 -63 23
-5 5 20 17 55 28 62 19 63 19 96 0 18 -11 30 -24 27 -29z m250 25 c54 -19 52
-25 -22 -49 -51 -16 -53 -16 -87 5 -19 12 -35 23 -35 25 0 9 56 34 76 35 11 0
42 -7 68 -16z m674 -107 c28 -28 52 -57 52 -64 0 -10 -43 -13 -197 -13 -108 0
-193 3 -190 7 4 3 48 34 99 69 87 58 96 62 138 57 37 -5 54 -14 98 -56z m-888
4 c0 -33 -7 -45 -50 -85 -27 -25 -51 -46 -53 -46 -3 0 3 30 12 67 14 54 23 70
47 85 40 25 44 23 44 -21z m86 20 c24 -15 33 -29 43 -75 7 -32 10 -60 7 -64
-4 -3 -27 14 -51 38 -38 37 -45 50 -45 82 0 43 4 45 46 19z m1463 -25 c8 -10
5 -27 -15 -72 -15 -33 -29 -61 -31 -63 -7 -9 -111 102 -106 114 2 7 30 17 61
23 80 13 78 13 91 -2z m-1327 -50 c30 -16 38 -27 48 -65 28 -116 30 -121 50
-121 24 0 24 0 5 70 -8 30 -12 56 -10 58 11 11 69 -38 86 -72 l19 -40 -52
-123 c-35 -80 -58 -123 -68 -123 -9 0 -25 -7 -36 -15 -19 -13 -30 -11 -103 13
-46 15 -81 32 -81 39 0 7 -9 22 -20 33 -16 16 -20 33 -20 81 l0 62 50 -47 c47
-44 70 -51 70 -23 0 6 -27 39 -61 73 -58 59 -60 62 -57 107 l3 47 62 -55 c92
-82 109 -72 78 45 -17 61 -19 83 -7 78 4 -2 24 -12 44 -22z m1434 -129 c26
-78 49 -149 52 -157 3 -8 -38 27 -91 79 l-95 93 26 57 c29 65 41 83 52 76 5
-3 30 -69 56 -148z m-359 132 c7 -7 6 -28 -5 -72 -17 -67 -21 -63 -36 36 -6
42 -5 47 11 47 11 0 24 -5 30 -11z m-61 -82 c6 -40 10 -74 8 -76 -2 -2 -25 13
-51 32 -27 19 -67 43 -91 52 -23 10 -42 20 -42 24 0 8 153 50 160 44 3 -3 10
-37 16 -76z m208 -129 c-53 -106 -66 -110 -119 -38 l-37 51 22 89 c28 114 41
119 122 42 l57 -55 -45 -89z m-490 127 c29 -29 44 -31 71 -11 26 19 78 -1 166
-65 l66 -49 7 -132 7 -133 -75 -72 c-72 -68 -77 -71 -115 -66 -33 5 -42 2 -53
-16 -12 -20 -19 -21 -240 -21 l-227 0 -26 26 -26 26 3 241 c3 224 5 244 23
269 l20 27 187 1 c186 0 187 0 212 -25z m650 -154 c50 -51 86 -94 82 -100 -5
-7 -48 -11 -119 -11 -104 0 -113 2 -126 22 -12 19 -9 30 25 100 21 43 41 78
44 78 3 0 45 -40 94 -89z m-1124 -151 c0 -166 -3 -220 -12 -220 -7 0 -34 21
-60 47 -37 36 -48 54 -48 78 0 17 -5 36 -11 42 -9 9 -3 33 24 95 70 162 78
178 92 178 13 0 15 -34 15 -220z m855 38 c-1 -45 -19 -88 -35 -88 -6 0 -10 40
-10 93 l1 92 22 -27 c16 -20 22 -40 22 -70z m349 -26 c3 -5 -38 -46 -91 -92
l-97 -82 -33 72 c-27 60 -30 74 -20 91 11 17 24 19 124 19 61 0 114 -4 117 -8z
m-245 -111 c17 -37 31 -72 31 -77 0 -14 -97 -94 -113 -94 -24 0 -33 21 -46 98
l-11 74 30 37 c44 57 69 48 109 -38z m221 -85 c-28 -86 -57 -156 -64 -156 -6
0 -29 34 -49 76 -32 63 -36 79 -25 89 52 50 181 155 185 151 3 -3 -18 -75 -47
-160z m-1469 114 c26 -7 43 -20 53 -38 13 -24 12 -31 -12 -72 -46 -82 -43 -83
-110 31 -33 57 -59 106 -56 111 2 4 23 1 45 -7 22 -8 58 -19 80 -25z m-90 -96
c34 -58 62 -112 62 -119 0 -13 -122 -225 -129 -225 -2 0 -4 101 -4 225 0 124
2 225 4 225 2 0 32 -48 67 -106z m1189 -31 c10 -60 9 -68 -7 -84 -16 -15 -26
-16 -78 -7 -33 6 -64 14 -70 19 -6 6 16 33 60 74 39 35 73 64 76 65 4 0 12
-30 19 -67z m-858 -77 c-6 -22 -27 -41 -84 -77 l-77 -48 -32 52 c-18 29 -32
57 -32 63 0 6 16 38 37 72 50 83 73 86 143 17 48 -45 52 -53 45 -79z m1095
-11 c23 -47 34 -78 28 -84 -15 -13 -161 35 -169 56 -5 11 7 29 41 59 26 24 51
43 56 44 4 0 24 -34 44 -75z m-514 -12 c3 -5 -29 -38 -71 -74 -67 -57 -83 -67
-126 -72 -48 -5 -52 -3 -150 65 -56 39 -105 74 -110 79 -6 5 85 9 221 9 128 0
234 -3 236 -7z m192 -17 c47 -10 56 -15 40 -21 -11 -4 -35 -14 -54 -21 -46
-19 -56 -18 -69 10 -7 17 -7 27 1 35 13 13 7 13 82 -3z m-990 -46 c14 -22 25
-44 25 -49 0 -10 -162 -113 -168 -106 -4 4 108 195 114 195 2 0 15 -18 29 -40z
m438 -39 c78 -55 107 -80 107 -96 0 -29 -215 -152 -236 -134 -19 16 -21 295
-1 302 16 7 10 11 130 -72z m-254 -22 l-43 -82 -33 38 c-18 21 -30 41 -27 46
7 12 137 89 142 84 2 -2 -15 -41 -39 -86z m693 67 c17 -25 3 -35 -94 -70 -57
-20 -106 -36 -111 -36 -4 0 25 29 65 65 64 56 77 64 103 58 17 -3 33 -11 37
-17z m-617 -265 c-4 -11 -18 -1 -50 35 -24 27 -44 54 -45 60 0 7 21 52 48 100
l47 89 3 -134 c1 -74 0 -142 -3 -150z m993 240 c44 -14 72 -27 72 -36 0 -12
-238 -185 -254 -185 -11 0 -6 41 15 126 18 69 26 87 44 94 13 5 26 14 30 20 3
5 9 8 13 6 4 -2 40 -14 80 -25z m-181 8 c7 -7 6 -31 -7 -82 -10 -40 -21 -84
-24 -99 -4 -16 -10 -28 -15 -28 -11 0 -93 171 -85 179 9 10 88 40 105 40 8 1
20 -4 26 -10z m-122 -131 c27 -57 40 -97 35 -102 -9 -9 -294 86 -313 103 -6 6
194 86 226 90 5 1 28 -41 52 -91z m-861 17 l37 -45 -71 -130 c-39 -72 -75
-128 -80 -125 -5 3 -34 41 -64 85 -48 70 -54 83 -49 117 5 35 11 42 92 90 47
29 89 53 92 53 4 0 23 -20 43 -45z m729 -100 c75 -27 134 -52 130 -56 -27 -24
-613 -44 -599 -20 3 5 51 35 107 66 74 42 104 54 112 46 15 -15 50 -14 73 4
10 8 24 13 29 11 6 -1 72 -24 148 -51z m-597 -92 c-2 -37 -11 -52 -68 -116
-62 -69 -69 -73 -100 -69 -62 9 -63 26 -1 142 31 58 64 119 75 137 l19 32 39
-42 c33 -37 38 -48 36 -84z m-322 -53 l65 -94 -61 -116 c-96 -181 -88 -187
-88 79 0 143 4 231 10 229 5 -1 38 -46 74 -98z m366 -186 c0 -134 -3 -174 -13
-174 -7 0 -42 30 -78 68 -57 58 -66 72 -67 105 0 32 9 46 70 112 38 41 74 72
79 69 5 -3 9 -84 9 -180z m-267 43 c3 -8 1 -20 -4 -28 -5 -8 -6 -22 -3 -32 7
-21 -10 -42 -81 -101 l-49 -41 46 85 c25 47 51 95 57 108 13 25 26 28 34 9z
m162 -177 c38 -38 64 -73 61 -79 -5 -7 -65 -11 -182 -11 -142 0 -174 3 -174
14 0 8 33 45 74 83 69 65 76 69 113 65 34 -3 51 -14 108 -72z" />
                    <path d="M2338 737 c-64 -11 -73 -22 -27 -32 19 -4 34 -16 40 -32 5 -13 9
-144 9 -291 0 -281 -5 -313 -45 -320 -11 -2 -24 -8 -30 -13 -5 -5 42 -9 119
-9 82 0 125 4 121 10 -3 6 -14 10 -24 10 -40 0 -41 12 -41 357 l0 333 -32 -1
c-18 -1 -59 -6 -90 -12z" />
                    <path d="M2710 707 c-50 -25 -29 -107 27 -107 26 0 63 32 63 55 0 16 -43 65
-57 65 -4 0 -19 -6 -33 -13z" />
                    <path d="M4810 691 c-17 -32 -11 -60 16 -77 54 -36 122 29 79 76 -24 27 -80
27 -95 1z" />
                    <path d="M4450 635 c0 -24 -31 -78 -54 -95 -11 -8 -36 -20 -55 -26 -51 -15
-52 -34 -2 -34 l41 0 0 -170 c0 -187 7 -221 55 -258 33 -26 117 -30 169 -8 62
26 61 58 -1 34 -46 -17 -75 -13 -99 14 -17 18 -19 39 -19 202 l0 181 78 3 c56
2 77 6 74 15 -2 8 -32 13 -80 15 l-77 3 0 69 c0 56 -3 70 -15 70 -8 0 -15 -7
-15 -15z" />
                    <path d="M1868 508 c-49 -13 -116 -72 -139 -122 -21 -47 -25 -148 -8 -207 29
-94 112 -149 225 -149 154 0 244 93 244 250 0 62 -32 141 -71 177 -60 55 -159
75 -251 51z m159 -48 c40 -41 56 -98 55 -197 0 -59 -6 -95 -21 -127 -40 -92
-134 -112 -197 -43 -74 80 -70 293 6 369 24 23 37 28 78 28 42 0 54 -5 79 -30z" />
                    <path d="M3160 505 c-19 -9 -50 -30 -67 -47 l-33 -32 0 30 c0 49 -12 57 -66
50 -102 -15 -115 -24 -66 -42 28 -11 29 -13 35 -110 8 -112 -1 -263 -16 -281
-5 -7 -18 -13 -28 -13 -11 0 -19 -4 -19 -10 0 -6 47 -10 121 -10 77 0 118 4
114 10 -3 6 -14 10 -24 10 -36 0 -41 20 -41 173 0 163 7 189 60 221 56 32 113
16 136 -39 17 -41 20 -305 4 -336 -6 -11 -21 -19 -35 -19 -14 0 -25 -4 -25
-10 0 -6 47 -10 121 -10 77 0 118 4 114 10 -3 6 -14 10 -24 10 -36 0 -41 20
-41 167 0 149 7 179 46 214 27 24 61 32 100 25 56 -11 64 -40 64 -224 0 -163
-4 -182 -41 -182 -10 0 -21 -5 -24 -10 -4 -6 38 -10 120 -10 82 0 124 4 120
10 -3 5 -14 10 -23 10 -43 1 -46 11 -52 197 -5 153 -8 182 -25 207 -52 78
-197 72 -267 -13 -23 -27 -27 -29 -32 -13 -4 10 -20 31 -36 47 -37 35 -115 44
-170 20z" />
                    <path d="M3920 514 c-8 -3 -34 -12 -57 -20 l-43 -16 0 -54 c0 -66 21 -74 39
-14 15 49 59 80 114 80 53 0 93 -40 102 -104 4 -26 6 -49 4 -51 -2 -2 -44 -10
-93 -18 -123 -22 -175 -50 -200 -109 -17 -41 -17 -50 -5 -89 20 -61 64 -89
139 -89 60 0 110 24 151 73 l18 22 1 -23 c0 -36 43 -72 85 -72 20 0 45 5 56
10 22 12 26 35 5 27 -7 -3 -23 1 -35 9 -20 14 -21 24 -21 152 0 75 -5 154 -9
176 -12 48 -51 90 -100 105 -38 11 -123 14 -151 5z m160 -284 c0 -79 -15 -112
-61 -136 -110 -57 -198 71 -107 155 25 24 97 49 141 50 27 1 27 1 27 -69z" />
                    <path d="M5220 514 c-8 -3 -34 -12 -57 -20 l-43 -16 0 -54 c0 -41 4 -54 15
-54 8 0 15 5 15 11 0 27 35 81 61 94 52 27 122 15 148 -26 15 -25 27 -119 15
-119 -5 0 -38 -5 -74 -10 -157 -25 -220 -71 -220 -158 1 -87 48 -132 140 -132
61 0 109 22 147 68 23 27 23 27 23 4 0 -37 43 -72 87 -72 43 1 92 23 74 34 -6
4 -15 5 -20 2 -4 -3 -17 1 -27 8 -17 13 -20 32 -24 178 -6 182 -16 215 -73
244 -32 17 -157 29 -187 18z m160 -287 c0 -80 -12 -107 -60 -132 -72 -37 -140
-1 -140 74 0 56 39 99 105 116 95 26 95 25 95 -58z" />
                    <path d="M2673 498 c-58 -11 -67 -22 -26 -33 15 -3 31 -12 35 -18 12 -18 9
-346 -2 -368 -6 -11 -21 -19 -35 -19 -14 0 -25 -4 -25 -10 0 -6 49 -10 126
-10 117 0 153 10 86 23 -19 4 -32 14 -36 29 -3 13 -6 112 -6 221 l0 197 -32
-1 c-18 -1 -57 -6 -85 -11z" />
                    <path d="M4798 498 c-64 -11 -74 -23 -28 -33 19 -4 32 -14 35 -28 3 -12 4 -98
3 -192 l-3 -170 -32 -10 c-61 -17 -33 -25 94 -25 76 0 123 4 118 9 -6 5 -19
11 -30 13 -38 7 -45 42 -45 251 l0 197 -27 -1 c-16 -1 -54 -6 -85 -11z" />
                </g>
            </svg>
            <div class="header-center">
                <div class="equation-box">
                    <span id="liveEquation"></span>
                </div>
                <div id="statusBadge" class="status-badge status-moving">
                    ‚ñ∂ Em Movimento
                </div>
            </div>
        </header>

        <!-- Painel Esquerdo -->
        <div class="left-panel">
            <!-- Controles -->
            <div class="panel-section">
                <h2 class="panel-title">‚öô Controles</h2>

                <div class="control-group">
                    <label class="control-label">
                        <span>Œ∏ √Çngulo</span>
                        <span class="control-value value-angle" id="angleValue">30¬∞</span>
                    </label>
                    <input type="range" id="angleSlider" min="5" max="60" value="30" step="1">
                </div>

                <div class="control-group">
                    <label class="control-label">
                        <span>m Massa</span>
                        <span class="control-value value-mass" id="massValue">5 kg</span>
                    </label>
                    <input type="range" id="massSlider" min="1" max="50" value="5" step="0.5">
                </div>

                <div class="control-group">
                    <label class="control-label">
                        <span>Œº‚Çõ Atrito Est√°tico</span>
                        <span class="control-value value-friction" id="frictionValue">0.35</span>
                    </label>
                    <input type="range" id="frictionSlider" min="0" max="1" value="0.35" step="0.01">
                </div>

                <div class="control-group">
                    <label class="control-label">
                        <span>Œº‚Çñ Atrito Cin√©tico</span>
                        <span class="control-value value-friction" id="frictionKineticValue">0.20</span>
                    </label>
                    <input type="range" id="frictionKineticSlider" min="0" max="1" value="0.2" step="0.01">
                </div>

                <div class="force-display">
                    <div class="force-item">
                        <span class="force-name"><span class="force-dot dot-weight"></span>Peso (P)</span>
                        <span id="forceP">49.0 N</span>
                    </div>
                    <div class="force-item">
                        <span class="force-name"><span class="force-dot dot-px"></span>P‚Çì (‚à•)</span>
                        <span id="forcePx">24.5 N</span>
                    </div>
                    <div class="force-item">
                        <span class="force-name"><span class="force-dot dot-py"></span>P·µß (‚ä•)</span>
                        <span id="forcePy">42.4 N</span>
                    </div>
                    <div class="force-item">
                        <span class="force-name"><span class="force-dot dot-normal"></span>Normal (N)</span>
                        <span id="forceN">42.4 N</span>
                    </div>
                    <div class="force-item">
                        <span class="force-name"><span class="force-dot dot-friction"></span>Atrito (f‚Çê‚Çú)</span>
                        <span id="forceFat">8.5 N</span>
                    </div>
                    <div class="force-item" style="font-size: 0.65rem; color: #888; margin-top: 4px;">
                        <span>Œº‚Çõ (est√°tico): <span id="muStaticDisplay">0.35</span></span>
                        <span>Œº‚Çñ (cin√©tico): <span id="muKineticDisplay">0.20</span></span>
                    </div>
                </div>

                <div class="play-controls">
                    <button class="btn btn-primary" id="btnPlay">‚ñ∂ Iniciar</button>
                    <button class="btn btn-secondary" id="btnReset">‚Üª</button>
                </div>
            </div>

            <!-- Energia -->
            <div class="panel-section">
                <h2 class="panel-title">‚ö° Balan√ßo Energ√©tico</h2>

                <div class="energy-bars">
                    <div class="energy-bar-container">
                        <div class="energy-value" id="epValue">0 J</div>
                        <div class="energy-bar-wrapper">
                            <div class="energy-bar bar-ep" id="barEp"></div>
                        </div>
                        <div class="energy-label">Ep</div>
                    </div>

                    <div class="energy-bar-container">
                        <div class="energy-value" id="ecValue">0 J</div>
                        <div class="energy-bar-wrapper">
                            <div class="energy-bar bar-ec" id="barEc"></div>
                        </div>
                        <div class="energy-label">Ec</div>
                    </div>

                    <div class="energy-bar-container">
                        <div class="energy-value" id="heatValue">0 J</div>
                        <div class="energy-bar-wrapper">
                            <div class="energy-bar bar-heat" id="barHeat"></div>
                        </div>
                        <div class="energy-label">Calor</div>
                    </div>
                </div>

                <div class="energy-total">
                    Energia Total: <span id="totalEnergy">0 J</span>
                </div>
            </div>
        </div>

        <!-- Canvas - Ocupa todo o resto -->
        <div class="canvas-container">
            <canvas id="mainCanvas"></canvas>
            <div class="canvas-overlay">
                <button class="overlay-btn active" id="btnShowVectors" title="Vetores">‚Üó</button>
                <button class="overlay-btn" id="btnExplode" title="Decompor">‚ú¶</button>
                <button class="overlay-btn" id="btnShowGrid" title="Grade">#</button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURA√á√ïES
        // ============================================
        const CONFIG = {
            g: 9.8,
            scaleBase: 2.5,
            maxVectorLength: 160,
            colors: {
                plane: '#f8f9fa',
                weight: '#ffff00',
                weightComponents: 'rgba(255, 255, 0, 0.7)',
                normal: '#00ffff',
                friction: '#ff00ff',
                block: '#2a2a4a',
                blockBorder: '#5a5a8a'
            }
        };

        // ============================================
        // ESTADO
        // ============================================
        let state = {
            angle: 45,
            mass: 5,
            muStatic: 0.35,
            muKinetic: 0.2,
            isRunning: false,
            time: 0,
            velocity: 0,
            position: 0,
            showVectors: true,
            explodeVectors: true,  // Ativado por padr√£o
            showGrid: true,        // Ativado por padr√£o
            initialEnergy: 0,
            blockStopped: false,
            rampLength: 0,
            currentEnergy: { ep: 0, ek: 0, heat: 0 }
        };

        // ============================================
        // ELEMENTOS
        // ============================================
        const mainCanvas = document.getElementById('mainCanvas');
        const ctx = mainCanvas.getContext('2d');

        const angleSlider = document.getElementById('angleSlider');
        const massSlider = document.getElementById('massSlider');
        const frictionSlider = document.getElementById('frictionSlider');
        const frictionKineticSlider = document.getElementById('frictionKineticSlider');

        const btnPlay = document.getElementById('btnPlay');
        const btnReset = document.getElementById('btnReset');
        const btnShowVectors = document.getElementById('btnShowVectors');
        const btnExplode = document.getElementById('btnExplode');
        const btnShowGrid = document.getElementById('btnShowGrid');

        const barEp = document.getElementById('barEp');
        const barEc = document.getElementById('barEc');
        const barHeat = document.getElementById('barHeat');

        // ============================================
        // F√çSICA
        // ============================================
        function calculatePhysics(useKinetic = false) {
            const thetaRad = state.angle * Math.PI / 180;
            const P = state.mass * CONFIG.g;
            const Px = P * Math.sin(thetaRad);
            const Py = P * Math.cos(thetaRad);
            const N = Py;

            // Usar atrito est√°tico para verificar se move, cin√©tico quando em movimento
            const muToUse = useKinetic ? state.muKinetic : state.muStatic;
            const Fat = muToUse * N;

            // Atrito est√°tico determina se o bloco come√ßa a se mover
            const FatStatic = state.muStatic * N;
            const isStatic = Px <= FatStatic;

            // Acelera√ß√£o usa atrito cin√©tico quando em movimento
            const FatKinetic = state.muKinetic * N;
            let a = (Px - FatKinetic) / state.mass;
            if (isStatic) a = 0;

            return { P, Px, Py, N, Fat: useKinetic ? FatKinetic : FatStatic, FatKinetic, FatStatic, a, isStatic, thetaRad };
        }

        function getDynamicScale(forces) {
            const maxForce = Math.max(forces.P, forces.N, forces.Fat);
            if (maxForce === 0) return CONFIG.scaleBase;
            return Math.min(CONFIG.scaleBase, CONFIG.maxVectorLength / maxForce);
        }

        // ============================================
        // UI
        // ============================================
        function updateUI() {
            const physics = calculatePhysics(state.isRunning && !state.blockStopped);

            document.getElementById('angleValue').textContent = `${state.angle}¬∞`;
            document.getElementById('massValue').textContent = `${state.mass} kg`;
            document.getElementById('frictionValue').textContent = state.muStatic.toFixed(2);
            document.getElementById('frictionKineticValue').textContent = state.muKinetic.toFixed(2);

            // Atualizar displays de mu
            document.getElementById('muStaticDisplay').textContent = state.muStatic.toFixed(2);
            document.getElementById('muKineticDisplay').textContent = state.muKinetic.toFixed(2);

            document.getElementById('forceP').textContent = `${physics.P.toFixed(1)} N`;
            document.getElementById('forcePx').textContent = `${physics.Px.toFixed(1)} N`;
            document.getElementById('forcePy').textContent = `${physics.Py.toFixed(1)} N`;
            document.getElementById('forceN').textContent = `${physics.N.toFixed(1)} N`;
            document.getElementById('forceFat').textContent = `${physics.Fat.toFixed(1)} N`;

            updateLiveEquation(physics);

            const badge = document.getElementById('statusBadge');
            if (physics.isStatic) {
                badge.className = 'status-badge status-static';
                badge.innerHTML = '‚ö† Equil√≠brio Est√°tico';
            } else if (state.blockStopped) {
                badge.className = 'status-badge status-static';
                badge.innerHTML = 'üõë Bloco Parou';
            } else {
                badge.className = 'status-badge status-moving';
                badge.innerHTML = '‚ñ∂ Em Movimento';
            }
        }

        function updateLiveEquation(physics) {
            const container = document.getElementById('liveEquation');
            const aVal = physics.a.toFixed(2);
            container.innerHTML = `<span style="color:#fff">a = g(sinŒ∏ ‚àí Œº‚ÇñcosŒ∏) = </span><span style="color:#00ff88; text-shadow: 0 0 10px #00ff88;">${aVal} m/s¬≤</span>`;
        }

        function updateEnergyDisplay() {
            const { ep, ek, heat } = state.currentEnergy;
            const total = state.initialEnergy || (ep + ek + heat);

            if (total <= 0) return;

            // Percentuais baseados na energia inicial
            const epPercent = Math.max(0, Math.min(100, (ep / total) * 100));
            const ekPercent = Math.max(0, Math.min(100, (ek / total) * 100));
            const heatPercent = Math.max(0, Math.min(100, (heat / total) * 100));

            barEp.style.height = `${epPercent}%`;
            barEc.style.height = `${ekPercent}%`;
            barHeat.style.height = `${heatPercent}%`;

            document.getElementById('epValue').textContent = `${ep.toFixed(0)} J`;
            document.getElementById('ecValue').textContent = `${ek.toFixed(0)} J`;
            document.getElementById('heatValue').textContent = `${heat.toFixed(0)} J`;
            document.getElementById('totalEnergy').textContent = `${total.toFixed(0)} J`;
        }

        // ============================================
        // RENDERIZA√á√ÉO
        // ============================================
        function resizeCanvas() {
            const container = mainCanvas.parentElement;
            mainCanvas.width = container.clientWidth;
            mainCanvas.height = container.clientHeight;
        }

        function drawNeonVector(startX, startY, angle, length, color, label = '', dashed = false) {
            if (length < 3) return;

            const endX = startX + Math.cos(angle) * length;
            const endY = startY + Math.sin(angle) * length;
            const headLength = Math.min(18, length * 0.25);

            ctx.save();
            ctx.shadowBlur = 18;
            ctx.shadowColor = color;

            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 4;
            if (dashed) ctx.setLineDash([8, 5]);
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.beginPath();
            ctx.fillStyle = color;
            ctx.moveTo(endX, endY);
            ctx.lineTo(
                endX - headLength * Math.cos(angle - Math.PI / 6),
                endY - headLength * Math.sin(angle - Math.PI / 6)
            );
            ctx.lineTo(
                endX - headLength * Math.cos(angle + Math.PI / 6),
                endY - headLength * Math.sin(angle + Math.PI / 6)
            );
            ctx.closePath();
            ctx.fill();

            if (label) {
                ctx.shadowBlur = 8;
                ctx.font = 'bold 16px Segoe UI';
                ctx.fillStyle = color;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(label, endX + Math.cos(angle) * 22, endY + Math.sin(angle) * 22);
            }

            ctx.restore();
        }

        function render() {
            const width = mainCanvas.width;
            const height = mainCanvas.height;

            ctx.fillStyle = '#0a0a0f';
            ctx.fillRect(0, 0, width, height);

            if (state.showGrid) drawGrid(width, height);

            const physics = calculatePhysics(state.isRunning && !state.blockStopped);
            const scale = getDynamicScale(physics);
            const thetaRad = physics.thetaRad;

            // PLANO INCLINADO DIN√ÇMICO - expande com √¢ngulos pequenos
            const margin = 80;
            const rightPadding = 20; // Margem m√≠nima da borda direita

            // Calcular comprimento base dinamicamente baseado no √¢ngulo
            // Em 5¬∞, a rampa vai at√© a borda direita; em 60¬∞, usa tamanho padr√£o
            const minAngle = 5;
            const maxAngle = 60;
            const normalizedAngle = Math.max(minAngle, Math.min(maxAngle, state.angle));

            // Fator de expans√£o: 1.0 em 60¬∞, cresce at√© preencher tela em 5¬∞
            const expansionFactor = 1 + (1 - (normalizedAngle - minAngle) / (maxAngle - minAngle)) * 1.5;

            const maxBaseLength = width - margin - rightPadding;
            const baseDesiredLength = Math.min(700 * expansionFactor, maxBaseLength);
            const planeBaseLength = baseDesiredLength;
            const planeHeight = planeBaseLength * Math.tan(thetaRad);

            // Limitar altura para n√£o sair da tela
            const maxHeight = height - margin * 2 - 50;
            let actualBaseLength = planeBaseLength;
            let actualHeight = planeHeight;

            if (planeHeight > maxHeight) {
                actualHeight = maxHeight;
                actualBaseLength = actualHeight / Math.tan(thetaRad);
            }

            // Posicionamento
            const baseX = margin + actualBaseLength;
            const baseY = height - margin;
            const topX = margin;
            const topY = baseY - actualHeight;

            // Guardar comprimento da rampa para f√≠sica
            state.rampLength = Math.sqrt(actualBaseLength ** 2 + actualHeight ** 2);

            // Ch√£o
            ctx.strokeStyle = '#3a3a5a';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(0, baseY);
            ctx.lineTo(width, baseY);
            ctx.stroke();

            // Tri√¢ngulo preenchido
            ctx.beginPath();
            ctx.moveTo(topX, topY);
            ctx.lineTo(baseX, baseY);
            ctx.lineTo(topX, baseY);
            ctx.closePath();

            const grad = ctx.createLinearGradient(topX, topY, topX, baseY);
            grad.addColorStop(0, '#2a2a4a');
            grad.addColorStop(1, '#1a1a2e');
            ctx.fillStyle = grad;
            ctx.fill();

            // Superf√≠cie da rampa com glow
            ctx.save();
            ctx.shadowBlur = 20;
            ctx.shadowColor = CONFIG.colors.plane;
            ctx.strokeStyle = CONFIG.colors.plane;
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(topX, topY);
            ctx.lineTo(baseX, baseY);
            ctx.stroke();
            ctx.restore();

            // Linha vertical (altura h)
            ctx.strokeStyle = 'rgba(248, 249, 250, 0.4)';
            ctx.lineWidth = 2;
            ctx.setLineDash([8, 5]);
            ctx.beginPath();
            ctx.moveTo(topX, topY);
            ctx.lineTo(topX, baseY);
            ctx.stroke();
            ctx.setLineDash([]);

            // Label h
            ctx.fillStyle = '#aaa';
            ctx.font = '14px Segoe UI';
            ctx.textAlign = 'right';
            ctx.fillText('h', topX - 10, (topY + baseY) / 2);

            // Arco do √¢ngulo Œ∏ - DENTRO do tri√¢ngulo
            ctx.strokeStyle = 'rgba(248, 249, 250, 0.6)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            const arcRadius = 50;
            // O arco vai da horizontal (œÄ) at√© a rampa (œÄ + Œ∏)
            // Sentido hor√°rio (false) para ficar dentro do tri√¢ngulo
            ctx.arc(baseX, baseY, arcRadius, Math.PI, Math.PI + thetaRad, false);
            ctx.stroke();

            // Label Œ∏ - posicionado dentro do tri√¢ngulo
            ctx.fillStyle = '#f8f9fa';
            ctx.font = 'bold 16px Segoe UI';
            ctx.textAlign = 'center';
            const labelAng = Math.PI + thetaRad / 2;
            ctx.fillText(`Œ∏ = ${state.angle}¬∞`, baseX + 70 * Math.cos(labelAng), baseY + 70 * Math.sin(labelAng));

            // BLOCO
            const blockSize = 50 + (state.mass / 50) * 25;
            const maxTravel = state.rampLength - blockSize * 1.2;
            const blockTravel = Math.min(state.position, maxTravel);

            const rampAngle = Math.atan2(actualHeight, actualBaseLength);
            const offsetFromSurface = blockSize / 2;

            const blockX = topX + blockTravel * Math.cos(rampAngle) + offsetFromSurface * Math.sin(rampAngle);
            const blockY = topY + blockTravel * Math.sin(rampAngle) - offsetFromSurface * Math.cos(rampAngle);

            ctx.save();
            ctx.translate(blockX, blockY);
            ctx.rotate(rampAngle);

            if (state.mu === 0) {
                ctx.shadowBlur = 30;
                ctx.shadowColor = '#00ff88';
            }

            ctx.fillStyle = CONFIG.colors.block;
            ctx.strokeStyle = state.mu === 0 ? '#00ff88' : CONFIG.colors.blockBorder;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.roundRect(-blockSize / 2, -blockSize / 2, blockSize, blockSize, 6);
            ctx.fill();
            ctx.stroke();

            ctx.rotate(-rampAngle);
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 14px Segoe UI';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(`${state.mass}kg`, 0, 0);
            ctx.restore();

            // VETORES
            if (state.showVectors) {
                // Peso P - para baixo
                drawNeonVector(blockX, blockY, Math.PI / 2, physics.P * scale, CONFIG.colors.weight, 'P');

                // Normal N - perpendicular √† rampa
                const normalAng = rampAngle - Math.PI / 2;
                drawNeonVector(blockX, blockY, normalAng, physics.N * scale, CONFIG.colors.normal, 'N');

                // Atrito - contra o movimento
                if (physics.Fat > 0.5) {
                    const fatAng = rampAngle + Math.PI;
                    drawNeonVector(blockX, blockY, fatAng, physics.Fat * scale, CONFIG.colors.friction, 'f‚Çê‚Çú');
                }

                // Decomposi√ß√£o
                if (state.explodeVectors) {
                    drawNeonVector(blockX, blockY, rampAngle, physics.Px * scale, CONFIG.colors.weightComponents, 'P‚Çì', true);

                    const pyAng = rampAngle + Math.PI / 2;
                    drawNeonVector(blockX, blockY, pyAng, physics.Py * scale, CONFIG.colors.weightComponents, 'P·µß', true);

                    // Paralelogramo
                    const pxEnd = { x: blockX + Math.cos(rampAngle) * physics.Px * scale, y: blockY + Math.sin(rampAngle) * physics.Px * scale };
                    const pyEnd = { x: blockX + Math.cos(pyAng) * physics.Py * scale, y: blockY + Math.sin(pyAng) * physics.Py * scale };
                    const pEnd = { x: blockX, y: blockY + physics.P * scale };

                    ctx.strokeStyle = 'rgba(255, 255, 0, 0.3)';
                    ctx.lineWidth = 2;
                    ctx.setLineDash([5, 5]);
                    ctx.beginPath();
                    ctx.moveTo(pxEnd.x, pxEnd.y);
                    ctx.lineTo(pEnd.x, pEnd.y);
                    ctx.moveTo(pyEnd.x, pyEnd.y);
                    ctx.lineTo(pEnd.x, pEnd.y);
                    ctx.stroke();
                    ctx.setLineDash([]);
                }
            }

            updateEnergyDisplay();
        }

        function drawGrid(width, height) {
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.04)';
            ctx.lineWidth = 1;
            for (let x = 0; x < width; x += 50) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            for (let y = 0; y < height; y += 50) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
        }

        // ============================================
        // LOOP
        // ============================================
        let lastTime = 0;
        let animationId = null;

        function gameLoop(currentTime) {
            if (!state.isRunning) return;

            const dt = Math.min((currentTime - lastTime) / 1000, 0.05);
            lastTime = currentTime;

            const physics = calculatePhysics(true); // Usar atrito cin√©tico durante movimento
            const thetaRad = physics.thetaRad;

            // Calcular posi√ß√£o m√°xima baseada no comprimento real da rampa
            const blockSize = 50 + (state.mass / 50) * 25;
            const maxTravel = state.rampLength - blockSize * 1.2;

            // Verificar se chegou ao fim
            if (state.position >= maxTravel) {
                state.blockStopped = true;
                state.position = maxTravel;

                // Quando o bloco para, TODA energia cin√©tica vira calor
                const remainingKineticEnergy = 0.5 * state.mass * state.velocity ** 2;
                state.velocity = 0; // Bloco para completamente

                // Energia final: Ep = 0, Ec = 0 (virou calor)
                state.currentEnergy.ep = 0;
                state.currentEnergy.ek = 0; // Ec zerada
                state.currentEnergy.heat = state.initialEnergy; // Toda energia inicial virou calor

                updateUI();
            }

            if (!physics.isStatic && !state.blockStopped) {
                state.velocity += physics.a * dt;
                state.position += state.velocity * dt;
                state.time += dt;

                // Calcular altura atual baseada na posi√ß√£o ao longo da rampa
                const traveledHeight = state.position * Math.sin(thetaRad);
                const initialHeight = state.rampLength * Math.sin(thetaRad);
                const currentHeight = Math.max(0, initialHeight - traveledHeight);

                state.currentEnergy.ep = state.mass * CONFIG.g * currentHeight;
                state.currentEnergy.ek = 0.5 * state.mass * state.velocity ** 2;
                state.currentEnergy.heat = physics.FatKinetic * state.position; // Usar atrito cin√©tico
            }

            render();
            animationId = requestAnimationFrame(gameLoop);
        }

        function startSimulation() {
            if (state.isRunning) return;
            state.isRunning = true;

            // Calcular energia inicial baseada na altura real da rampa
            const thetaRad = state.angle * Math.PI / 180;
            const initialHeight = state.rampLength * Math.sin(thetaRad);
            state.initialEnergy = state.mass * CONFIG.g * initialHeight;

            state.currentEnergy = {
                ep: state.initialEnergy,
                ek: 0,
                heat: 0
            };

            btnPlay.innerHTML = '‚è∏ Pausar';
            lastTime = performance.now();
            animationId = requestAnimationFrame(gameLoop);
        }

        function pauseSimulation() {
            state.isRunning = false;
            btnPlay.innerHTML = '‚ñ∂ Continuar';
            if (animationId) cancelAnimationFrame(animationId);
        }

        function resetSimulation() {
            pauseSimulation();
            state.velocity = 0;
            state.position = 0;
            state.time = 0;
            state.blockStopped = false;
            state.initialEnergy = 0;
            state.currentEnergy = { ep: 0, ek: 0, heat: 0 };
            btnPlay.innerHTML = '‚ñ∂ Iniciar';
            updateUI();
            render();
        }

        // ============================================
        // EVENTOS
        // ============================================
        angleSlider.addEventListener('input', (e) => {
            state.angle = parseFloat(e.target.value);
            resetSimulation();
        });

        massSlider.addEventListener('input', (e) => {
            state.mass = parseFloat(e.target.value);
            resetSimulation();
        });

        frictionSlider.addEventListener('input', (e) => {
            state.muStatic = parseFloat(e.target.value);
            // Garantir que atrito cin√©tico seja sempre <= est√°tico
            if (state.muKinetic > state.muStatic) {
                state.muKinetic = state.muStatic;
                frictionKineticSlider.value = state.muKinetic;
            }
            resetSimulation();
        });

        frictionKineticSlider.addEventListener('input', (e) => {
            let newValue = parseFloat(e.target.value);
            // Atrito cin√©tico deve ser sempre <= est√°tico
            if (newValue > state.muStatic) {
                newValue = state.muStatic;
                frictionKineticSlider.value = newValue;
            }
            state.muKinetic = newValue;
            resetSimulation();
        });

        btnPlay.addEventListener('click', () => {
            state.isRunning ? pauseSimulation() : startSimulation();
        });

        btnReset.addEventListener('click', resetSimulation);

        btnShowVectors.addEventListener('click', () => {
            state.showVectors = !state.showVectors;
            btnShowVectors.classList.toggle('active', state.showVectors);
            render();
        });

        btnExplode.addEventListener('click', () => {
            state.explodeVectors = !state.explodeVectors;
            btnExplode.classList.toggle('active', state.explodeVectors);
            render();
        });

        btnShowGrid.addEventListener('click', () => {
            state.showGrid = !state.showGrid;
            btnShowGrid.classList.toggle('active', state.showGrid);
            render();
        });

        window.addEventListener('resize', () => {
            resizeCanvas();
            render();
        });

        // ============================================
        // INICIALIZA√á√ÉO
        // ============================================
        function init() {
            resizeCanvas();

            // Ativar bot√µes de grade e decomposi√ß√£o por padr√£o
            btnExplode.classList.add('active');
            btnShowGrid.classList.add('active');

            // Sincronizar valores iniciais dos sliders
            angleSlider.value = state.angle;
            frictionSlider.value = state.muStatic;
            frictionKineticSlider.value = state.muKinetic;

            updateUI();
            render();
        }

        init();
    </script>
</body>

</html>
